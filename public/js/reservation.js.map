{"version":3,"sources":["csrf.js","reservation.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"reservation.js","sourcesContent":["$(document).ready(function () {\r\n  $.ajaxSetup({\r\n    headers: {\r\n      'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n    }\r\n  });\r\n});","$(document).ready(function () {\r\n  var getResources = function () {\r\n    //console.log(document.forms[0].elements['category_id'].value)\r\n    //var categoryId = document.forms[0].elements['category_id'].value;\r\n    $.get('/reservation/resources/category_id/' + document.forms[0].elements['category_id'].value, function (response) {\r\n        if (response) {\r\n            destroyDataTable();\r\n            $('#iTbodyResources').html(response);\r\n            initializeDataTable();\r\n        }\r\n        $('#btnViewResource').click(function () {\r\n            var id = $(this).data('id');\r\n            console.log('RES ID ' + id);\r\n            showResourceDialog(id);\r\n        });\r\n        $('#btnReserveResource').click(function () {\r\n            var id = $(this).data('id');\r\n            console.log('RES ID ' + id);\r\n            showReservationDialog(id);\r\n        });\r\n    });\r\n  };\r\n  var bindStoreSubmit = function () {\r\n    console.log('SUBMIT EVENT');\r\n    //$('#iFormReservation').submit(function (event) {\r\n    //document.iFormReservation.iInputNIC\r\n    //var Nic = document.getElementById(\"iFormReservation\").iInputNIC;\r\n    console.log('SUBMIT EVENT>> ' + $('#iInputName').val());\r\n    $('#iListResource').submit(function (event) {\r\n      console.log('SUBMIT EVENT IN >>');\r\n      // TODO add $.blockui\r\n      event.preventDefault();\r\n      /*  var resource = {\r\n       name: $('#iInputName').val(),\r\n       category_id: $('#iInputCategoryId').val(),\r\n       location: $('#iInputLocation').val(),\r\n       description: $('#iInputDescription').val()\r\n       }; */\r\n\r\n      //  $.post(\"/reservation\", resource, function (response) {\r\n      //    getResources();\r\n      //  });\r\n    });\r\n  };\r\n\r\n  var bindUpdateSubmit = function (id) {\r\n    console.log('UPDATE SUBMIT EVENT');\r\n    $('#iFormResource').submit(function (event) {\r\n      // TODO add $.blockui\r\n      event.preventDefault();\r\n      var resource = {\r\n        _method: 'PUT', id: id, name: $('#iInputName').val(), category_id: $('#iInputCategoryId').val(),\r\n        location: $('#iInputLocation').val(),\r\n        description: $('#iInputDescription').val()\r\n      };\r\n\r\n      console.log(resource);\r\n\r\n      $.ajax({\r\n        url: '/reservation/' + id, type: 'PUT', data: resource, success: function (response) {\r\n          getResources();\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  var dataTable = $('.data-table');\r\n\r\n  var initializeDataTable = function () {\r\n    dataTable.dataTable({\r\n      \"bJQueryUI\": true,\r\n      \"sPaginationType\": \"full_numbers\",\r\n      \"sDom\": '<\"\"l>t<\"F\"fp>'\r\n    });\r\n  };\r\n\r\n  var destroyDataTable = function () {\r\n    dataTable.dataTable().fnDestroy();\r\n  };\r\n\r\n  var bindCategorySelect = function () {\r\n    $('#iSelectCategory').change(function () {\r\n      var categoryId = $(this).find('option:selected').val();\r\n      $('#iInputCategoryId').val(categoryId);\r\n    });\r\n  };\r\n\r\n  getResources();\r\n  bindStoreSubmit();\r\n  bindCategorySelect();\r\n  initializeDataTable();\r\n\r\n  var showResourceDialog = function (resourceId) {\r\n      console.log('view resourceId >> ' + resourceId);\r\n      $.get('/reservation/resources/resource/'+ resourceId, function (response) {\r\n          // alert(response);\r\n          $('#resCalendar').html(response);\r\n\r\n          $('#resCalendar').attr(\"class\", \"modal fade in\");\r\n          $('#resCalendar').attr(\"aria-hidden\", \"false\");\r\n\r\n          $( \"#btnReserveResourceDialog\" ).click(function() {\r\n              var id = $(this).data('id');\r\n              alert( \"Handler for btnReserveResource .click() called. ID >> \" + id);\r\n              $('#resCalendar').attr(\"class\", \"modal fade\");\r\n              $('#resCalendar').attr(\"aria-hidden\", \"true\");\r\n              showReservationDialog(id);\r\n          });\r\n          event.preventDefault();\r\n      });\r\n  }\r\n\r\n  var showReservationDialog = function (resourceId) {\r\n    console.log('resourceId >> 0' + resourceId);\r\n      $.get('/reservation/resources/calendar/'+ resourceId, function (response) {\r\n\r\n          if (response) {\r\n              $('#resCalendar').html(response);\r\n\r\n              $( \"#resSave\" ).click(function() {\r\n                  // alert( \"Handler for .click() called.\" + $('#iInputName').val());\r\n                  var reservation = {\r\n                      resource_id: resourceId,\r\n                      purpose: $('#iInputPurpose').val(),\r\n                      name: $('#iInputName').val(),\r\n                      address: $('#iInputAddress').val(),\r\n                      nic: $('#iInputNIC').val(),\r\n                      contact_number: $('#iInputContactNum').val(),\r\n                      email_address: $('#iInputEmail').val(),\r\n                      start:$('#iInputStartDate').val(),\r\n                      end:$('#iInputEndDate').val(),\r\n                  };\r\n\r\n                  // console.log(reservation);\r\n\r\n                  // alert( \"Handler for .click() called.\" + reservation);\r\n                  $.post(\"/reservation\", reservation, function (response) {\r\n                      if (response) {\r\n                        alert(response);\r\n                      }\r\n                      $('#resCalendar').attr(\"class\", \"modal fade\");\r\n                      $('#resCalendar').attr(\"aria-hidden\", \"true\");\r\n                  });\r\n                  event.preventDefault();\r\n              });\r\n\r\n\r\n              $('#iInputStartDate').datepicker();\r\n              $('#iInputEndDate').datepicker();\r\n\r\n              var date = new Date();\r\n              var d = date.getDate();\r\n              var m = date.getMonth();\r\n              var y = date.getFullYear();\r\n\r\n              $('#calendar').fullCalendar({\r\n                  header: {\r\n                      left: 'prev,next',\r\n                      center: 'title',\r\n                      right: 'month,basicWeek,basicDay'\r\n                  },\r\n                  editable: true,\r\n                  selectable: true,\r\n                  selectOverlap: false,\r\n                  events: [\r\n                      {\r\n                          title: 'All day event',\r\n                          start: new Date(y, m, 1)\r\n                      },\r\n                      {\r\n                          title: 'Long event',\r\n                          start: new Date(y, m, 5),\r\n                          end: new Date(y, m, 8)\r\n                      },\r\n                      {\r\n                          id: 999,\r\n                          title: 'Repeating event',\r\n                          start: new Date(y, m, 2, 16, 0),\r\n                          end: new Date(y, m, 3, 18, 0),\r\n                          allDay: false\r\n                      },\r\n                      {\r\n                          id: 999,\r\n                          title: 'Repeating event',\r\n                          start: new Date(y, m, 9, 16, 0),\r\n                          end: new Date(y, m, 10, 18, 0),\r\n                          allDay: false\r\n                      },\r\n                      {\r\n                          title: 'Lunch',\r\n                          start: new Date(y, m, 14, 12, 0),\r\n                          end: new Date(y, m, 15, 14, 0),\r\n                          allDay: false\r\n                      },\r\n                      {\r\n                          title: 'Birthday PARTY',\r\n                          start: new Date(y, m, 18),\r\n                          end: new Date(y, m, 20),\r\n                          allDay: false\r\n                      },\r\n                      {\r\n                          title: 'Click for Google',\r\n                          start: new Date(y, m, 27),\r\n                          end: new Date(y, m, 29),\r\n                          url: 'http://www.google.com'\r\n                      }\r\n                  ]\r\n              });\r\n          }\r\n      });\r\n    /*var dialogContent = '';\r\n    console.log('resourceId >> 1' + resourceId);\r\n    dialogContent += '<div class=\"modal-dialog\" role=\"document\">';\r\n    dialogContent += '<div class=\"modal-content\">';\r\n    dialogContent += '<div class=\"modal-header\">'\r\n    dialogContent += '<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">'\r\n    dialogContent += '<span aria-hidden=\"true\">&times;</span>';\r\n    dialogContent += '</button>'\r\n    dialogContent += '<h4 class=\"modal-title\" id=\"myModalLabel\">Modal title</h4>';\r\n    dialogContent += '</div>';\r\n    dialogContent += '<div class=\"modal-body\">';\r\n    dialogContent += '<div class=\"row-fluid\">';\r\n    dialogContent += '<div class=\"span4\">';\r\n    dialogContent += '<div class=\"widget-box\">';\r\n    dialogContent += '<div class=\"widget-title\"> <span class=\"icon\"> <i class=\"icon-align-justify\"></i> </span>';\r\n    dialogContent += '<h5>Personal-info</h5>';\r\n    dialogContent += '</div>';\r\n    dialogContent += '<div class=\"widget-content nopadding\">';\r\n    dialogContent += '<form action=\"#\" method=\"get\" class=\"form-horizontal\" id=\"iFormReservation\">';\r\n    dialogContent += '<input type=\"hidden\" name=\"resource_id\" value=\"' + resourceId + '\">';\r\n    dialogContent += '<label class=\"control-label\">Name :</label>';\r\n    dialogContent += '<div class=\"controls\">';\r\n    dialogContent += '<input type=\"text\" class=\"span11\" placeholder=\"Name\" id=\"iInputName\" />';\r\n    dialogContent += '</div>';\r\n    dialogContent += '<label class=\"control-label\">Address</label>';\r\n    dialogContent += '<div class=\"controls\">';\r\n    dialogContent += '<textarea class=\"span11\" ></textarea>';\r\n    dialogContent += '</div>';\r\n    dialogContent += '<label class=\"control-label\">NIC number :</label>';\r\n    dialogContent += '<div class=\"controls\">';\r\n    dialogContent += '<input type=\"text\" class=\"span11\" placeholder=\"NIC number\" id=\"iInputNIC\" />';\r\n    dialogContent += '</div>';\r\n    dialogContent += '<label class=\"control-label\">Contact number :</label>';\r\n    dialogContent += '<div class=\"controls\">';\r\n    dialogContent += '<input type=\"text\" class=\"span11\" placeholder=\"Contact number\"  id=\"iInputContactNum\" />';\r\n    dialogContent += '</div>';\r\n    dialogContent += '<label class=\"control-label\">Email address :</label>';\r\n    dialogContent += '<div class=\"controls\">';\r\n    dialogContent += '<input type=\"text\" class=\"span11\" placeholder=\"Email address\"  id=\"iInputEmail\" />';\r\n    dialogContent += '</div>';\r\n    dialogContent += '<label class=\"control-label\">Reservation Start Date :</label>';\r\n    dialogContent += '<div class=\"controls\">';\r\n    dialogContent += '<div class=\"input-append date datepicker\">';\r\n    dialogContent += '<input type=\"text\" data-date-format=\"mm-dd-yyyy\" class=\"span9\" id=\"iInputStartDate\" >';\r\n    dialogContent += '<span class=\"add-on\"><i class=\"icon-th\"></i></span> </div>';\r\n    dialogContent += '</div>';\r\n    dialogContent += '<label class=\"control-label\">Reservation End Date :</label>';\r\n    dialogContent += '<div class=\"controls\">';\r\n    dialogContent += '<div class=\"input-append date datepicker\">';\r\n    dialogContent += '<input type=\"text\" data-date-format=\"mm-dd-yyyy\" class=\"span9\" id=\"iInputEndDate\" >';\r\n    dialogContent += '<span class=\"add-on\"><i class=\"icon-th\"></i></span> </div>';\r\n    dialogContent += '</div>';\r\n    dialogContent += '<div class=\"form-actions\">';\r\n    dialogContent += '<button type=\"button\" class=\"btn btn-success\" id=\"resSave\">Save</button>';\r\n    dialogContent += '<button type=\"reset\" class=\"btn btn-success\">Cancel</button>';\r\n    dialogContent += '</div>';\r\n    dialogContent += '</form>';\r\n    dialogContent += '</div>';\r\n    dialogContent += '</div>';\r\n    dialogContent += '</div>';\r\n    dialogContent += '<div class=\"span8\">';\r\n    dialogContent += '<div class=\"widget-box widget-calendar\">';\r\n    dialogContent += '<div class=\"widget-title\"> <span class=\"icon\"><i class=\"icon-calendar\"></i></span>';\r\n    dialogContent += '<h5>Calendar</h5>';\r\n    dialogContent += '</div>';\r\n    dialogContent += '<div class=\"widget-content\">';\r\n    dialogContent += '<div id=\"calendar\"></div>';\r\n    dialogContent += '</div>';\r\n    dialogContent += '</div>';*/\r\n    /*dialogContent += '</div>';\r\n    dialogContent += '</div>';\r\n    dialogContent += '</div>';\r\n    dialogContent += '</div>';\r\n    dialogContent += '</div>';*/\r\n    console.log('resourceId >> 2' + resourceId);\r\n    //$('#resCalendar').html(calendarContent);\r\n    $('#resCalendar').attr(\"class\", \"modal fade in\");\r\n    $('#resCalendar').attr(\"aria-hidden\", \"false\");\r\n\r\n\r\n\r\n  };\r\n});\r\n"]}