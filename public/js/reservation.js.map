{"version":3,"sources":["csrf.js","reservation.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"reservation.js","sourcesContent":["$(document).ready(function () {\n  $.ajaxSetup({\n    headers: {\n      'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n    }\n  });\n});","$(document).ready(function () {\n  var getResources = function () {\n    //console.log(document.forms[0].elements['category_id'].value)\n    //var categoryId = document.forms[0].elements['category_id'].value;\n    $.get('/reservation/resources/category_id/' + document.forms[0].elements['category_id'].value, function (response) {\n\n      if (response) {\n        destroyDataTable();\n        $('#iTbodyResources').html(response);\n        initializeDataTable();\n      }\n\n      $('.cTrResource').click(function () {\n        var id = $(this).data('id');\n        console.log('RES ID ' + id);\n        showReservationDialog(id);\n      });\n    });\n  };\n  var bindStoreSubmit = function () {\n    console.log('SUBMIT EVENT');\n    //$('#iFormReservation').submit(function (event) {\n    //document.iFormReservation.iInputNIC\n    //var Nic = document.getElementById(\"iFormReservation\").iInputNIC;\n    console.log('SUBMIT EVENT>> ' + $('#iInputName').val());\n    $('#iListResource').submit(function (event) {\n      console.log('SUBMIT EVENT IN >>');\n      // TODO add $.blockui\n      event.preventDefault();\n      /*  var resource = {\n       name: $('#iInputName').val(),\n       category_id: $('#iInputCategoryId').val(),\n       location: $('#iInputLocation').val(),\n       description: $('#iInputDescription').val()\n       }; */\n\n      //  $.post(\"/reservation\", resource, function (response) {\n      //    getResources();\n      //  });\n    });\n  };\n\n  var bindUpdateSubmit = function (id) {\n    console.log('UPDATE SUBMIT EVENT');\n    $('#iFormResource').submit(function (event) {\n      // TODO add $.blockui\n      event.preventDefault();\n      var resource = {\n        _method: 'PUT', id: id, name: $('#iInputName').val(), category_id: $('#iInputCategoryId').val(),\n        location: $('#iInputLocation').val(),\n        description: $('#iInputDescription').val()\n      };\n\n      console.log(resource);\n\n      $.ajax({\n        url: '/reservation/' + id, type: 'PUT', data: resource, success: function (response) {\n          getResources();\n        }\n      });\n    });\n  };\n\n  var dataTable = $('.data-table');\n\n  var initializeDataTable = function () {\n    dataTable.dataTable({\n      \"bJQueryUI\": true,\n      \"sPaginationType\": \"full_numbers\",\n      \"sDom\": '<\"\"l>t<\"F\"fp>'\n    });\n  };\n\n  var destroyDataTable = function () {\n    dataTable.dataTable().fnDestroy();\n  };\n\n  var bindCategorySelect = function () {\n    $('#iSelectCategory').change(function () {\n      var categoryId = $(this).find('option:selected').val();\n      $('#iInputCategoryId').val(categoryId);\n    });\n  };\n\n  getResources();\n  bindStoreSubmit();\n  bindCategorySelect();\n  initializeDataTable();\n\n  var showReservationDialog = function (resourceId) {\n    console.log('resourceId >> 0' + resourceId);\n    var dialogContent = '';\n    console.log('resourceId >> 1' + resourceId);\n    dialogContent += '<div class=\"modal-dialog\" role=\"document\">';\n    dialogContent += '<div class=\"modal-content\">';\n    dialogContent += '<div class=\"modal-header\">'\n    dialogContent += '<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">'\n    dialogContent += '<span aria-hidden=\"true\">&times;</span>';\n    dialogContent += '</button>'\n    dialogContent += '<h4 class=\"modal-title\" id=\"myModalLabel\">Modal title</h4>';\n    dialogContent += '</div>';\n    dialogContent += '<div class=\"modal-body\">';\n    dialogContent += '<div class=\"row-fluid\">';\n    dialogContent += '<div class=\"span4\">';\n    dialogContent += '<div class=\"widget-box\">';\n    dialogContent += '<div class=\"widget-title\"> <span class=\"icon\"> <i class=\"icon-align-justify\"></i> </span>';\n    dialogContent += '<h5>Personal-info</h5>';\n    dialogContent += '</div>';\n    dialogContent += '<div class=\"widget-content nopadding\">';\n    dialogContent += '<form action=\"#\" method=\"get\" class=\"form-horizontal\" id=\"iFormReservation\">';\n    dialogContent += '<input type=\"hidden\" name=\"resource_id\" value=\"' + resourceId + '\">';\n    dialogContent += '<label class=\"control-label\">Name :</label>';\n    dialogContent += '<div class=\"controls\">';\n    dialogContent += '<input type=\"text\" class=\"span11\" placeholder=\"Name\" id=\"iInputName\" />';\n    dialogContent += '</div>';\n    dialogContent += '<label class=\"control-label\">Address</label>';\n    dialogContent += '<div class=\"controls\">';\n    dialogContent += '<textarea class=\"span11\" ></textarea>';\n    dialogContent += '</div>';\n    dialogContent += '<label class=\"control-label\">NIC number :</label>';\n    dialogContent += '<div class=\"controls\">';\n    dialogContent += '<input type=\"text\" class=\"span11\" placeholder=\"NIC number\" id=\"iInputNIC\" />';\n    dialogContent += '</div>';\n    dialogContent += '<label class=\"control-label\">Contact number :</label>';\n    dialogContent += '<div class=\"controls\">';\n    dialogContent += '<input type=\"text\" class=\"span11\" placeholder=\"Contact number\"  id=\"iInputContactNum\" />';\n    dialogContent += '</div>';\n    dialogContent += '<label class=\"control-label\">Email address :</label>';\n    dialogContent += '<div class=\"controls\">';\n    dialogContent += '<input type=\"text\" class=\"span11\" placeholder=\"Email address\"  id=\"iInputEmail\" />';\n    dialogContent += '</div>';\n    dialogContent += '<label class=\"control-label\">Reservation Start Date :</label>';\n    dialogContent += '<div class=\"controls\">';\n    dialogContent += '<div class=\"input-append date datepicker\">';\n    dialogContent += '<input type=\"text\" data-date-format=\"mm-dd-yyyy\" class=\"span9\" id=\"iInputStartDate\" >';\n    dialogContent += '<span class=\"add-on\"><i class=\"icon-th\"></i></span> </div>';\n    dialogContent += '</div>';\n    dialogContent += '<label class=\"control-label\">Reservation End Date :</label>';\n    dialogContent += '<div class=\"controls\">';\n    dialogContent += '<div class=\"input-append date datepicker\">';\n    dialogContent += '<input type=\"text\" data-date-format=\"mm-dd-yyyy\" class=\"span9\" id=\"iInputEndDate\" >';\n    dialogContent += '<span class=\"add-on\"><i class=\"icon-th\"></i></span> </div>';\n    dialogContent += '</div>';\n    dialogContent += '<div class=\"form-actions\">';\n    dialogContent += '<button type=\"submit\" class=\"btn btn-success\">Save</button>';\n    dialogContent += '<button type=\"submit\" class=\"btn btn-success\">Cancel</button>';\n    dialogContent += '</div>';\n    dialogContent += '</form>';\n    dialogContent += '</div>';\n    dialogContent += '</div>';\n    dialogContent += '</div>';\n    dialogContent += '<div class=\"span8\">';\n    dialogContent += '<div class=\"widget-box widget-calendar\">';\n    dialogContent += '<div class=\"widget-title\"> <span class=\"icon\"><i class=\"icon-calendar\"></i></span>';\n    dialogContent += '<h5>Calendar</h5>';\n    dialogContent += '</div>';\n    dialogContent += '<div class=\"widget-content\">';\n    dialogContent += '<div id=\"calendar\"></div>';\n    dialogContent += '</div>';\n    dialogContent += '</div>';\n    dialogContent += '</div>';\n    dialogContent += '</div>';\n    dialogContent += '</div>';\n    dialogContent += '</div>';\n    dialogContent += '</div>';\n    console.log('resourceId >> 2' + resourceId);\n    $('#resCalendar').html(dialogContent);\n    $('#resCalendar').attr(\"class\", \"modal fade in\");\n    $('#resCalendar').attr(\"aria-hidden\", \"false\");\n\n    var date = new Date();\n    var d = date.getDate();\n    var m = date.getMonth();\n    var y = date.getFullYear();\n\n    $('#calendar').fullCalendar({\n      header: {\n        left: 'prev,next',\n        center: 'title',\n        right: 'month,basicWeek,basicDay'\n      },\n      editable: true,\n      events: [\n        {\n          title: 'All day event',\n          start: new Date(y, m, 1)\n        },\n        {\n          title: 'Long event',\n          start: new Date(y, m, 5),\n          end: new Date(y, m, 8)\n        },\n        {\n          id: 999,\n          title: 'Repeating event',\n          start: new Date(y, m, 2, 16, 0),\n          end: new Date(y, m, 3, 18, 0),\n          allDay: false\n        },\n        {\n          id: 999,\n          title: 'Repeating event',\n          start: new Date(y, m, 9, 16, 0),\n          end: new Date(y, m, 10, 18, 0),\n          allDay: false\n        },\n        {\n          title: 'Lunch',\n          start: new Date(y, m, 14, 12, 0),\n          end: new Date(y, m, 15, 14, 0),\n          allDay: false\n        },\n        {\n          title: 'Birthday PARTY',\n          start: new Date(y, m, 18),\n          end: new Date(y, m, 20),\n          allDay: false\n        },\n        {\n          title: 'Click for Google',\n          start: new Date(y, m, 27),\n          end: new Date(y, m, 29),\n          url: 'http://www.google.com'\n        }\n      ]\n    });\n  };\n});\n"]}