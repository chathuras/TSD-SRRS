$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}})}),$(document).ready(function(){var i=function(){$.get("/resource",function(t){t&&(r(),$("#iTbodyResources").html(t),c()),$(".cBtnEdit").click(function(){var i=$(this).data("id");$.get("/resource/"+i+"/edit",function(t){$("#iDivResourceForm").html(t),o(i),a()})}),$(".cBtnDelete").click(function(){var t=$(this).data("id");bootbox.confirm("Are you sure?",function(e){e&&$.get("/resource/"+t+"/delete",function(t){t?($("#iDivSuccess").show("fast"),setTimeout(function(){$("#iDivSuccess").hide("slow")},2e3),i(),$("#iFormCategory")[0].reset()):($("#iDivError").show("fast"),setTimeout(function(){$("#iDivError").hide("slow")},2e3))}).fail(function(){$("#iDivError").show("fast"),setTimeout(function(){$("#iDivError").hide("slow")},2e3)})})})})},t=function(){$("#iBtnUpload").click(function(){$("#iInputIconFile").click()})},e=function(){$("#iFormResource").submit(function(t){if(t.preventDefault(),$("#iFormResource").valid()){var e={name:$("#iInputName").val(),category_id:$("#iInputCategoryId").val(),location:$("#iInputLocation").val(),description:$("#iInputDescription").val(),icon:$("#iInputIcon").val()};$.post("/resource",e,function(t){t?($("#iDivSuccess").show("fast"),setTimeout(function(){$("#iDivSuccess").hide("slow")},2e3),i(),$("#iFormResource")[0].reset()):($("#iDivError").show("fast"),setTimeout(function(){$("#iDivError").hide("slow")},2e3))}).fail(function(){$("#iDivError").show("fast"),setTimeout(function(){$("#iDivError").hide("slow")},2e3)})}})},o=function(t){$("#iFormResource").submit(function(e){if(e.preventDefault(),$("#iFormResource").valid()){var o={id:t,name:$("#iInputName").val(),category_id:$("#iInputCategoryId").val(),location:$("#iInputLocation").val(),description:$("#iInputDescription").val()};$.ajax({url:"/resource/"+t,type:"PUT",data:o,success:function(t){t?($("#iDivSuccess").show("fast"),setTimeout(function(){$("#iDivSuccess").hide("slow")},2e3),i(),$("#iFormCategory")[0].reset()):($("#iDivError").show("fast"),setTimeout(function(){$("#iDivError").hide("slow")},2e3))}}).fail(function(){$("#iDivError").show("fast"),setTimeout(function(){$("#iDivError").hide("slow")},2e3)})}})},n=$(".data-table"),c=function(){n.dataTable({bJQueryUI:!0,sPaginationType:"full_numbers",sDom:'<""l>t<"F"fp>'})},r=function(){n.dataTable().fnDestroy()},a=function(){$("#iSelectCategory").change(function(){var i=$(this).find("option:selected").val();$("#iInputCategoryId").val(i)})},s=function(){$("#iInputIconFile").on("change",function(){$.ajax({url:"/resource/upload",data:new FormData($("#iFormResource")[0]),dataType:"json",async:!0,type:"POST",processData:!1,contentType:!1,success:function(i){$("#iInputIconFileName").val($("#iInputIconFile")[0].files[0].name),$("#iInputIcon").val(i),$("#imgIcon").attr("src","/storage/category/"+i)}})})};i(),e(),a(),t(),s(),c()});