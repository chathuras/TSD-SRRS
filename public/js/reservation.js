$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}})}),$(document).ready(function(){var e=function(){$.get("/reservation/resources/category_id/"+document.forms[0].elements.category_id.value,function(e){e&&(n(),$("#iTbodyResources").html(e),r()),$(".btnViewResource").click(function(){var e=$(this).data("id");s(e)}),$(".btnReserveResource").click(function(){var e=$(this).data("id");d(e)})})},a=function(){$("#iListResource").submit(function(e){e.preventDefault()})},t=$(".data-table"),r=function(){t.dataTable({bJQueryUI:!0,sPaginationType:"full_numbers",sDom:'<""l>t<"F"fp>'})},n=function(){t.dataTable().fnDestroy()},i=function(){$("#iSelectCategory").change(function(){var e=$(this).find("option:selected").val();$("#iInputCategoryId").val(e)})};e(),a(),i(),r();var s=function(e){$.get("/reservation/resources/resource/"+e,function(e){$("#resCalendar").html(e),$("#resCalendar").attr("class","modal fade in"),$("#resCalendar").attr("aria-hidden","false"),$(".btnReserveResourceDialog").click(function(){var e=$(this).data("id");$("#resCalendar").attr("class","modal fade"),$("#resCalendar").attr("aria-hidden","true"),d(e)}),$(".btnCancelResourceDialog").click(function(){$("#resCalendar").attr("class","modal fade"),$("#resCalendar").attr("aria-hidden","true"),$("#resCalendar").empty()}),event.preventDefault()})},d=function(e){$.get("/reservation/resources/calendar/"+e,function(a){if(a){$("#resCalendar").html(a),$("#btnCancelRes").click(function(){$("#resCalendar").attr("class","modal fade"),$("#resCalendar").attr("aria-hidden","true"),$("#resCalendar").empty()}),$("#resSave").click(function(){if($("#iFormReservation").valid()){var a={resource_id:e,purpose:$("#iInputPurpose").val(),name:$("#iInputName").val(),address:$("#iInputAddress").val(),nic:$("#iInputNIC").val(),contact_number:$("#iInputContactNum").val(),email_address:$("#iInputEmail").val(),start:$("#iInputStartDate").data("timestamp"),end:$("#iInputEndDate").data("timestamp")};$.post("/reservation",a,function(e){e&&alert("Reservation successfully created !"),e?($("#iDivSuccess").show("fast"),setTimeout(function(){$("#iDivSuccess").hide("slow")},1e3)):($("#iDivError").show("fast"),setTimeout(function(){$("#iDivError").hide("slow")},2e3)),$("#resCalendar").attr("class","modal fade"),$("#resCalendar").attr("aria-hidden","true"),$("#resCalendar").empty()}).fail(function(){$("#iDivError").show("fast"),setTimeout(function(){$("#iDivError").hide("slow")},2e3)})}event.preventDefault()}),$("#iInputStartDate").datepicker(),$("#iInputEndDate").datepicker();var t=new Date;t.getDate(),t.getMonth(),t.getFullYear();$("#calendar").fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay,listWeek"},editable:!0,selectable:!0,selectOverlap:!1,select:function(e,a,t){$("#iInputStartDate").val(e),$("#iInputEndDate").val(e),$("#iInputStartDate").data("timestamp",new Date(e).getTime()/1e3),$("#iInputEndDate").data("timestamp",new Date(a).getTime()/1e3)},events:"/reservation/reservation_search?resource_id="+e})}}),$("#resCalendar").attr("class","modal fade in"),$("#resCalendar").attr("aria-hidden","false")}});