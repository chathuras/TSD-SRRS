$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}})}),$(document).ready(function(){var t=function(){$.get("/category",function(o){o&&(r(),$("#iTbodyCategories").html(o),c()),$(".cBtnCategoryEdit").click(function(){var t=$(this).data("id");$.get("/category/"+t+"/edit",function(o){$("#iDivCategoryForm").html(o),n(t)})}),$(".cBtnCategoryDelete").click(function(){var o=$(this).data("id");bootbox.confirm("Are you sure?",function(i){i&&$.ajax({url:"/category/"+o,type:"DELETE",success:function(){$("#iDivSuccess").show("fast"),setTimeout(function(){$("#iDivSuccess").hide("slow")},1e3),t(),$("#iFormCategory")[0].reset()}})})})})},o=function(){$("#iFormCategory").submit(function(o){if(o.preventDefault(),$("#iFormCategory").valid()){var i={name:$("#iInputName").val(),description:$("#iTextDescription").val(),icon:$("#iInputIcon").val(),color:$("#iInputColor").val()};$.post("/category",i,function(o){o?($("#iDivSuccess").show("fast"),setTimeout(function(){$("#iDivSuccess").hide("slow")},1e3),t(),$("#iFormCategory")[0].reset()):($("#iDivError").show("fast"),setTimeout(function(){$("#iDivError").hide("slow")},2e3))}).fail(function(){$("#iDivError").show("fast"),setTimeout(function(){$("#iDivError").hide("slow")},2e3)})}})},i=function(){$("#iBtnUpload").click(function(){$("#iInputIconFile").click()})},e=function(){$("#iInputColor").colorpicker()},n=function(o){$("#iFormCategory").submit(function(i){if(i.preventDefault(),$("#iFormCategory").valid()){var e={name:$("#iInputName").val(),description:$("#iTextDescription").val(),icon:$("#iInputIcon").val(),color:$("#iInputColor").val()};$.ajax({url:"/category/"+o,type:"PUT",data:e,success:function(){$("#iDivSuccess").show("fast"),setTimeout(function(){$("#iDivSuccess").hide("slow")},1e3),t(),$("#iFormCategory")[0].reset()}})}}),e(),i(),u()},a=$(".data-table"),c=function(){a.dataTable({bJQueryUI:!0,sPaginationType:"full_numbers",sDom:'<""l>t<"F"fp>'})},r=function(){a.dataTable().fnDestroy()},u=function(){$("#iInputIconFile").on("change",function(){$.ajax({url:"/category/upload",data:new FormData($("#iFormCategory")[0]),dataType:"json",async:!0,type:"POST",processData:!1,contentType:!1,success:function(t){$("#iInputIconFileName").val($("#iInputIconFile")[0].files[0].name),$("#iInputIcon").val(t),$("#imgIcon").attr("src","/storage/category/"+t)}})})};t(),o(),e(),i(),u(),c()});