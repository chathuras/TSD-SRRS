$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}})}),$(document).ready(function(){var t=function(){$.get("/category",function(t){t&&(c(),$("#iTbodyCategories").html(t),a()),$(".cTrCategory").click(function(){var t=$(this).data("id");$.get("/category/"+t+"/edit",function(i){$("#iDivCategoryForm").html(i),e(t)})})})},i=function(){$("#iFormCategory").submit(function(i){if(i.preventDefault(),$("#iFormCategory").valid()){var n={name:$("#iInputName").val(),description:$("#iTextDescription").val(),icon:$("#iInputIcon").val()};$.post("/category",n,function(i){i?($("#iDivSuccess").show("fast"),setTimeout(function(){$("#iDivSuccess").hide("slow")},1e3),t(),$("#iFormCategory")[0].reset()):($("#iDivError").show("fast"),setTimeout(function(){$("#iDivError").hide("slow")},2e3))}).fail(function(){$("#iDivError").show("fast"),setTimeout(function(){$("#iDivError").hide("slow")},2e3)})}})},n=function(){$("#iBtnUpload").click(function(){$("#iInputIconFile").click()})},e=function(i){$("#iFormCategory").submit(function(n){n.preventDefault();var e={_method:"PUT",id:i,name:$("#iInputName").val(),description:$("#iTextDescription").val()};$.ajax({url:"/category/"+i,type:"PUT",data:e,success:function(){t()}})})},o=$(".data-table"),a=function(){o.dataTable({bJQueryUI:!0,sPaginationType:"full_numbers",sDom:'<""l>t<"F"fp>'})},c=function(){o.dataTable().fnDestroy()},r=function(){$("#iInputIconFile").on("change",function(){$.ajax({url:"/category/upload",data:new FormData($("#iFormCategory")[0]),dataType:"json",async:!0,type:"POST",processData:!1,contentType:!1,success:function(t){$("#iInputIconFileName").val($("#iInputIconFile")[0].files[0].name),$("#iInputIcon").val(t),$("#imgIcon").attr("src","/storage/category/"+t)}})})};t(),i(),n(),r(),a()});