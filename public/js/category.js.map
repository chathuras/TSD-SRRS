{"version":3,"sources":["csrf.js","category.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"category.js","sourcesContent":["$(document).ready(function () {\r\n  $.ajaxSetup({\r\n    headers: {\r\n      'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n    }\r\n  });\r\n});","$(document).ready(function () {\r\n  var getCategories = function () {\r\n    $.get('/category', function (response) {\r\n      if (response) {\r\n        destroyDataTable();\r\n        $('#iTbodyCategories').html(response);\r\n        initializeDataTable();\r\n      }\r\n\r\n      $('.cBtnCategoryEdit').click(function () {\r\n        var id = $(this).data('id');\r\n\r\n        $.get('/category/' + id + '/edit', function (response) {\r\n          $('#iDivCategoryForm').html(response);\r\n          bindUpdateFormSubmit(id);\r\n        });\r\n      });\r\n\r\n      $('.cBtnCategoryDelete').click(function () {\r\n        var id = $(this).data('id');\r\n\r\n        bootbox.confirm('Are you sure?', function (result) {\r\n          if (result) {\r\n            $.ajax({\r\n              url: '/category/' + id, type: 'DELETE', success: function () {\r\n                $('#iDivSuccess').show('fast');\r\n                setTimeout(function () {\r\n                  $('#iDivSuccess').hide('slow');\r\n                }, 1000);\r\n                getCategories();\r\n                $('#iFormCategory')[0].reset();\r\n              }\r\n            });\r\n          }\r\n        });\r\n      });\r\n    });\r\n  };\r\n\r\n  var bindStoreSubmit = function () {\r\n    $('#iFormCategory').submit(function (event) {\r\n      event.preventDefault();\r\n      // TODO add $.blockui\r\n      if ($('#iFormCategory').valid()) {\r\n        var category = {\r\n          name: $('#iInputName').val(),\r\n          description: $('#iTextDescription').val(),\r\n          icon: $('#iInputIcon').val(),\r\n          color: $('#iInputColor').val()\r\n        };\r\n\r\n        $.post(\"/category\", category, function (response) {\r\n          if (response) {\r\n            $('#iDivSuccess').show('fast');\r\n            setTimeout(function () {\r\n              $('#iDivSuccess').hide('slow');\r\n            }, 1000);\r\n            getCategories();\r\n            $('#iFormCategory')[0].reset();\r\n          } else {\r\n            $('#iDivError').show('fast');\r\n            setTimeout(function () {\r\n              $('#iDivError').hide('slow');\r\n            }, 2000);\r\n          }\r\n        }).fail(function () {\r\n          $('#iDivError').show('fast');\r\n          setTimeout(function () {\r\n            $('#iDivError').hide('slow');\r\n          }, 2000);\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  var bindBtnIconUpload = function () {\r\n    $('#iBtnUpload').click(function () {\r\n      $('#iInputIconFile').click();\r\n    });\r\n  };\r\n\r\n  var bindColorInput = function () {\r\n    $(\"#iInputColor\").colorpicker();\r\n  };\r\n\r\n  var bindUpdateFormSubmit = function (id) {\r\n    $('#iFormCategory').submit(function (event) {\r\n      // TODO add $.blockui\r\n      event.preventDefault();\r\n      if ($('#iFormCategory').valid()) {\r\n        var category = {\r\n          name: $('#iInputName').val(),\r\n          description: $('#iTextDescription').val(),\r\n          icon: $('#iInputIcon').val(),\r\n          color: $('#iInputColor').val()\r\n        };\r\n\r\n        $.ajax({\r\n          url: '/category/' + id, type: 'PUT', data: category, success: function () {\r\n            $('#iDivSuccess').show('fast');\r\n            setTimeout(function () {\r\n              $('#iDivSuccess').hide('slow');\r\n            }, 1000);\r\n            getCategories();\r\n            $('#iFormCategory')[0].reset();\r\n          }\r\n        });\r\n      }\r\n    });\r\n    bindColorInput();\r\n    bindBtnIconUpload();\r\n    bindInputIconFile();\r\n  };\r\n\r\n  var dataTable = $('.data-table');\r\n\r\n  var initializeDataTable = function () {\r\n    dataTable.dataTable({\r\n      \"bJQueryUI\": true,\r\n      \"sPaginationType\": \"full_numbers\",\r\n      \"sDom\": '<\"\"l>t<\"F\"fp>'\r\n    });\r\n  };\r\n\r\n  var destroyDataTable = function () {\r\n    dataTable.dataTable().fnDestroy();\r\n  };\r\n\r\n  var bindInputIconFile = function () {\r\n    $('#iInputIconFile').on('change', function () {\r\n      $.ajax({\r\n        url: \"/category/upload\",\r\n        data: new FormData($('#iFormCategory')[0]),\r\n        dataType: 'json',\r\n        async: true,\r\n        type: 'POST',\r\n        processData: false,\r\n        contentType: false,\r\n        success: function (response) {\r\n          $('#iInputIconFileName').val($('#iInputIconFile')[0].files[0].name);\r\n          $('#iInputIcon').val(response);\r\n          $('#imgIcon').attr('src', '/storage/category/' + response);\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  getCategories();\r\n  bindStoreSubmit();\r\n  bindColorInput();\r\n  bindBtnIconUpload();\r\n  bindInputIconFile();\r\n  initializeDataTable();\r\n});"]}