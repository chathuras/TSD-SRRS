$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}})}),$(document).ready(function(){var e=function(e,t){$.get("/reservation/resources/reservations/"+t,function(r){if(r){$("#resCalendar").html(r),$("#btnCancelRes").click(function(){$("#resCalendar").attr("class","modal fade"),$("#resCalendar").attr("aria-hidden","true"),$("#resCalendar").empty()}),$("#btnResDelete").click(function(){Res=confirm("Are you sure you want to delete the selected reservation ? "),$.ajax({url:"/reservation/reservations/"+t,type:"DELETE",success:function(e){e?(a(),alert("Reservation successfully delete !"),$("#resCalendar").attr("class","modal fade"),$("#resCalendar").attr("aria-hidden","true"),$("#resCalendar").empty()):alert("delete failed. Pls try again later")}})}),$("#resSave").click(function(){alert("Handler for .UPDATE called."+$("#iInputName").val());var r={resource_id:e,purpose:$("#iInputPurpose").val(),name:$("#iInputName").val(),address:$("#iInputAddress").val(),nic:$("#iInputNIC").val(),contact_number:$("#iInputContactNum").val(),email_address:$("#iInputEmail").val(),start:$("#iInputStartDate").val(),end:$("#iInputEndDate").val()};$.ajax({url:"/reservation/reservations/"+t,type:"PUT",data:r,success:function(e){e?(alert("Reservation successfully Updated !"),a(),$("#resCalendar").attr("class","modal fade"),$("#resCalendar").attr("aria-hidden","true"),$("#resCalendar").empty()):alert("Update failed. Pls try again later")}}),event.preventDefault()}),$("#iInputStartDate").datepicker(),$("#iInputEndDate").datepicker();var n=new Date;n.getDate(),n.getMonth(),n.getFullYear();$("#calendar").fullCalendar({header:{left:"prev,next",center:"title",right:"month,basicWeek,basicDay"},editable:!0,selectable:!0,selectOverlap:!1,eventStartEditable:!1,select:function(e,a,t){$("#iInputStartDate").data("timestamp",new Date(e).getTime()/1e3),$("#iInputEndDate").data("timestamp",new Date(a).getTime()/1e3)},events:"/reservation/reservation_search?resource_id="+e})}}),$("#resCalendar").attr("class","modal fade in"),$("#resCalendar").attr("aria-hidden","false")},a=function(){$.get("/reservation/index",function(a){a&&(n(),$("#iTbodyReservations").html(a),r()),$(".btnViewReservation").click(function(){var a=$(this).data("resource_id"),t=$(this).data("reservation_id");e(a,t)})})},t=$(".data-table"),r=function(){t.dataTable({bJQueryUI:!0,sPaginationType:"full_numbers",sDom:'<""l>t<"F"fp>'})},n=function(){t.dataTable().fnDestroy()};a(),r()});