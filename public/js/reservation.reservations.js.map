{"version":3,"sources":["csrf.js","reservation.reservations.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"reservation.reservations.js","sourcesContent":["$(document).ready(function () {\r\n  $.ajaxSetup({\r\n    headers: {\r\n      'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n    }\r\n  });\r\n});","$(document).ready(function () {\r\n\r\n    var showReservationDialog = function (resourceId, reservationId) {\r\n        console.log('resourceId >> 0' + resourceId);\r\n        $.get('/reservation/resources/reservations/' + reservationId, function (response) {\r\n\r\n            if (response) {\r\n                $('#resCalendar').html(response);\r\n\r\n                $( \"#btnCancelRes\").click(function() {\r\n                    $('#resCalendar').attr(\"class\", \"modal fade\");\r\n                    $('#resCalendar').attr(\"aria-hidden\", \"true\");\r\n                    $('#resCalendar').empty();\r\n                });\r\n\r\n\r\n                $( \"#btnResDelete\" ).click(function() {\r\n                    Res = confirm('Are you sure you want to delete the selected reservation ? ');\r\n\r\n                    $.ajax({\r\n                        url: '/reservation/reservations/' + reservationId,\r\n                        type: 'DELETE',\r\n                        success: function(delResponse) {\r\n                            // Do something with the result\r\n                            if (delResponse) {\r\n                                getReservations();\r\n                                alert('Reservation successfully delete !');\r\n                                $('#resCalendar').attr(\"class\", \"modal fade\");\r\n                                $('#resCalendar').attr(\"aria-hidden\", \"true\");\r\n                                $('#resCalendar').empty();\r\n                            } else {\r\n                                alert('delete failed. Pls try again later')\r\n                            }\r\n                        }\r\n                    });\r\n                });\r\n\r\n                $(\"#resSave\").click(function () {\r\n                    // alert( \"Handler for .UPDATE called.\" + $('#iInputName').val());\r\n                    if ($('#iFormReservation').valid()) {\r\n                        alert('AFTER VALIDATION >> ');\r\n                        var reservation = {\r\n                            resource_id: resourceId,\r\n                            purpose: $('#iInputPurpose').val(),\r\n                            name: $('#iInputName').val(),\r\n                            address: $('#iInputAddress').val(),\r\n                            nic: $('#iInputNIC').val(),\r\n                            contact_number: $('#iInputContactNum').val(),\r\n                            email_address: $('#iInputEmail').val(),\r\n                            start: $('#iInputStartDate').val(),\r\n                            end: $('#iInputEndDate').val(),\r\n                        };\r\n\r\n                        // console.log(reservation);\r\n                        $.ajax({\r\n                            url: '/reservation/reservations/' + reservationId,\r\n                            type: 'PUT',\r\n                            data: reservation,\r\n                            success: function (putResponse) {\r\n                                // Do something with the result\r\n                                if (putResponse) {\r\n                                    alert('Reservation successfully Updated !');\r\n                                    getReservations();\r\n                                    $('#resCalendar').attr(\"class\", \"modal fade\");\r\n                                    $('#resCalendar').attr(\"aria-hidden\", \"true\");\r\n                                    $('#resCalendar').empty();\r\n                                } else {\r\n                                    alert('Reservation update failed. Please try again later')\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                    event.preventDefault();\r\n                });\r\n\r\n\r\n                $('#iInputStartDate').datepicker();\r\n                $('#iInputEndDate').datepicker();\r\n\r\n                var date = new Date();\r\n                var d = date.getDate();\r\n                var m = date.getMonth();\r\n                var y = date.getFullYear();\r\n\r\n                $('#calendar').fullCalendar({\r\n                    header: {\r\n                        left: 'prev,next',\r\n                        center: 'title',\r\n                        right: 'month,basicWeek,basicDay'\r\n                    },\r\n                    editable: true,\r\n                    selectable: true,\r\n                    selectOverlap: false,\r\n                    eventStartEditable: false,\r\n                    select: function(start, end, allDay) {\r\n                        // $('#iInputStartDate').val(start);\r\n                        // $('#iInputEndDate').val(start);\r\n\r\n                        $('#iInputStartDate').data('timestamp', new Date(start).getTime()/1000);\r\n                        $('#iInputEndDate').data('timestamp', new Date(end).getTime()/1000);\r\n                        /* $('#eventStart').datepicker(\"setDate\", new Date(start));\r\n                         $('#eventEnd').datepicker(\"setDate\", new Date(end));\r\n                         $('#calEventDialog') -->.dialog('open'); */\r\n                    },\r\n                    events:'/reservation/reservation_search?resource_id='+resourceId\r\n                });\r\n            }\r\n        });\r\n        console.log('resourceId >> 2' + resourceId);\r\n        //$('#resCalendar').html(calendarContent);\r\n        $('#resCalendar').attr(\"class\", \"modal fade in\");\r\n        $('#resCalendar').attr(\"aria-hidden\", \"false\");\r\n    };\r\n\r\n    var getReservations = function () {\r\n        //console.log(document.forms[0].elements['category_id'].value)\r\n        //var categoryId = document.forms[0].elements['category_id'].value;\r\n        $.get('/reservation/index', function (response) {\r\n\r\n            if (response) {\r\n                destroyDataTable();\r\n                $('#iTbodyReservations').html(response);\r\n                initializeDataTable();\r\n            }\r\n\r\n            $('.btnViewReservation').click(function () {\r\n                var resourceId = $(this).data('resource_id');\r\n                var reservationId = $(this).data('reservation_id');\r\n                showReservationDialog(resourceId, reservationId);\r\n            });\r\n        });\r\n    };\r\n    // var bindStoreSubmit = function () {\r\n    //   console.log('SUBMIT EVENT');\r\n    // \tconsole.log('SUBMIT EVENT>> '+ $('#iInputName').val());\r\n    // \t$('#iListResource').submit(function (event) {\r\n    // \t\t console.log('SUBMIT EVENT IN >>');\r\n    //     // TODO add $.blockui\r\n    //     event.preventDefault();\r\n    //   });\r\n    // };\r\n\r\n    var bindUpdateSubmit = function (id) {\r\n        console.log('UPDATE SUBMIT EVENT');\r\n        $('#iFormResource').submit(function (event) {\r\n            // TODO add $.blockui\r\n            event.preventDefault();\r\n            var resource = {\r\n                _method: 'PUT', id: id, name: $('#iInputName').val(), category_id: $('#iInputCategoryId').val(),\r\n                location: $('#iInputLocation').val(),\r\n                description: $('#iInputDescription').val()\r\n            };\r\n\r\n            console.log(resource);\r\n\r\n            $.ajax({\r\n                url: '/reservation/' + id, type: 'PUT', data: resource, success: function (response) {\r\n                    getResources();\r\n                }\r\n            });\r\n        });\r\n    };\r\n\r\n    var dataTable = $('.data-table');\r\n\r\n    var initializeDataTable = function () {\r\n        dataTable.dataTable({\r\n            \"bJQueryUI\": true,\r\n            \"sPaginationType\": \"full_numbers\",\r\n            \"sDom\": '<\"\"l>t<\"F\"fp>'\r\n        });\r\n    };\r\n\r\n    var destroyDataTable = function () {\r\n        dataTable.dataTable().fnDestroy();\r\n    };\r\n\r\n    getReservations();\r\n    // bindStoreSubmit();\r\n    initializeDataTable();\r\n\r\n\r\n\r\n\r\n});"]}