{"version":3,"sources":["csrf.js","reservation.reservations.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"reservation.reservations.js","sourcesContent":["$(document).ready(function () {\n  $.ajaxSetup({\n    headers: {\n      'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n    }\n  });\n});","$(document).ready(function () {\n\n    var showReservationDialog = function (resourceId, reservationId) {\n        console.log('resourceId >> 0' + resourceId);\n        $.get('/reservation/resources/reservations/' + reservationId, function (response) {\n\n            if (response) {\n                $('#resCalendar').html(response);\n\n                $( \"#btnCancelRes\").click(function() {\n                    $('#resCalendar').attr(\"class\", \"modal fade\");\n                    $('#resCalendar').attr(\"aria-hidden\", \"true\");\n                    $('#resCalendar').empty();\n                });\n\n\n                $( \"#btnResDelete\" ).click(function() {\n                    Res = confirm('Are you sure you want to delete the selected reservation ? ');\n\n                    $.ajax({\n                        url: '/reservation/reservations/' + reservationId,\n                        type: 'DELETE',\n                        success: function(delResponse) {\n                            // Do something with the result\n                            if (delResponse) {\n                                getReservations();\n                                alert('Reservation successfully delete !');\n                                $('#resCalendar').attr(\"class\", \"modal fade\");\n                                $('#resCalendar').attr(\"aria-hidden\", \"true\");\n                                $('#resCalendar').empty();\n                            } else {\n                                alert('delete failed. Pls try again later')\n                            }\n                        }\n                    });\n                });\n\n                $(\"#resSave\").click(function () {\n                    var reservation = {\n                        resource_id: resourceId,\n                        purpose: $('#iInputPurpose').val(),\n                        name: $('#iInputName').val(),\n                        address: $('#iInputAddress').val(),\n                        nic: $('#iInputNIC').val(),\n                        contact_number: $('#iInputContactNum').val(),\n                        email_address: $('#iInputEmail').val(),\n                        start: $('#iInputStartDate').data('timestamp'),\n                        end: $('#iInputEndDate').data('timestamp')\n                    };\n\n                    // console.log(reservation);\n                    $.ajax({\n                        url: '/reservation/reservations/' + reservationId,\n                        type: 'PUT',\n                        data: reservation,\n                        success: function(putResponse) {\n                            // Do something with the result\n                            if (putResponse) {\n                                getReservations();\n                                $('#resCalendar').attr(\"class\", \"modal fade\");\n                                $('#resCalendar').attr(\"aria-hidden\", \"true\");\n                                $('#resCalendar').empty();\n                            } else {\n                                alert('Update failed. Pls try again later')\n                            }\n                        }\n                    });\n                    event.preventDefault();\n                });\n\n\n                // $('#iInputStartDate').datepicker();\n                // $('#iInputEndDate').datepicker();\n\n                var date = new Date();\n                var d = date.getDate();\n                var m = date.getMonth();\n                var y = date.getFullYear();\n\n                $('#calendar').fullCalendar({\n                    header: {\n                        left: 'prev,next today',\n                        center: 'title',\n                        right: 'month,agendaWeek,agendaDay,listWeek'\n                    },\n                    editable: true,\n                    selectable: true,\n                    selectOverlap: false,\n                    // eventStartEditable: false,\n                    select: function(start, end, allDay) {\n                        // $('#iInputStartDate').val(start);\n                        // $('#iInputEndDate').val(start);\n\n                        $('#iInputStartDate').data('timestamp', new Date(start).getTime()/1000);\n                        $('#iInputEndDate').data('timestamp', new Date(end).getTime()/1000);\n                        /* $('#eventStart').datepicker(\"setDate\", new Date(start));\n                         $('#eventEnd').datepicker(\"setDate\", new Date(end));\n                         $('#calEventDialog') -->.dialog('open'); */\n                    },\n                    eventResize:function(event) {\n                        $('#iInputStartDate').val(event.start);\n                        $('#iInputEndDate').val(event.end);\n\n                        $('#iInputStartDate').data('timestamp', event.start.toDate().getTime()/1000);\n                        $('#iInputEndDate').data('timestamp', event.end.toDate().getTime()/1000);\n                    },\n                    eventDrop: function(event) {\n                        $('#iInputStartDate').val(event.start);\n                        $('#iInputEndDate').val(event.end);\n\n                        $('#iInputStartDate').data('timestamp', event.start.toDate().getTime()/1000);\n                        $('#iInputEndDate').data('timestamp', event.end.toDate().getTime()/1000);\n                    },\n                    events:'/reservation/reservation_search?resource_id='+resourceId + '&reservation_id='+reservationId\n                });\n            }\n        });\n        console.log('resourceId >> 2' + resourceId);\n        //$('#resCalendar').html(calendarContent);\n        $('#resCalendar').attr(\"class\", \"modal fade in\");\n        $('#resCalendar').attr(\"aria-hidden\", \"false\");\n    };\n\n    var getReservations = function () {\n        //console.log(document.forms[0].elements['category_id'].value)\n        //var categoryId = document.forms[0].elements['category_id'].value;\n        $.get('/reservation/index', function (response) {\n\n            if (response) {\n                destroyDataTable();\n                $('#iTbodyReservations').html(response);\n                initializeDataTable();\n            }\n\n            $('.btnViewReservation').click(function () {\n                var resourceId = $(this).data('resource_id');\n                var reservationId = $(this).data('reservation_id');\n                showReservationDialog(resourceId, reservationId);\n            });\n        });\n    };\n    // var bindStoreSubmit = function () {\n    //   console.log('SUBMIT EVENT');\n    // \tconsole.log('SUBMIT EVENT>> '+ $('#iInputName').val());\n    // \t$('#iListResource').submit(function (event) {\n    // \t\t console.log('SUBMIT EVENT IN >>');\n    //     // TODO add $.blockui\n    //     event.preventDefault();\n    //   });\n    // };\n\n    var bindUpdateSubmit = function (id) {\n        console.log('UPDATE SUBMIT EVENT');\n        $('#iFormResource').submit(function (event) {\n            // TODO add $.blockui\n            event.preventDefault();\n            var resource = {\n                _method: 'PUT', id: id, name: $('#iInputName').val(), category_id: $('#iInputCategoryId').val(),\n                location: $('#iInputLocation').val(),\n                description: $('#iInputDescription').val()\n            };\n\n            console.log(resource);\n\n            $.ajax({\n                url: '/reservation/' + id, type: 'PUT', data: resource, success: function (response) {\n                    getResources();\n                }\n            });\n        });\n    };\n\n    var dataTable = $('.data-table');\n\n    var initializeDataTable = function () {\n        dataTable.dataTable({\n            \"bJQueryUI\": true,\n            \"sPaginationType\": \"full_numbers\",\n            \"sDom\": '<\"\"l>t<\"F\"fp>'\n        });\n    };\n\n    var destroyDataTable = function () {\n        dataTable.dataTable().fnDestroy();\n    };\n\n    getReservations();\n    // bindStoreSubmit();\n    initializeDataTable();\n\n\n\n\n});"]}