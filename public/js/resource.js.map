{"version":3,"sources":["csrf.js","resource.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"resource.js","sourcesContent":["$(document).ready(function () {\r\n  $.ajaxSetup({\r\n    headers: {\r\n      'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n    }\r\n  });\r\n});","$(document).ready(function () {\r\n  var getResources = function () {\r\n    $.get('/resource', function (response) {\r\n\r\n      if (response) {\r\n        destroyDataTable();\r\n        $('#iTbodyResources').html(response);\r\n        initializeDataTable();\r\n      }\r\n\r\n      $('.cBtnEdit').click(function () {\r\n        var id = $(this).data('id');\r\n\r\n        $.get('/resource/' + id + '/edit', function (response) {\r\n          $('#iDivResourceForm').html(response);\r\n          bindUpdateSubmit(id);\r\n          bindCategorySelect();\r\n        });\r\n      });\r\n\r\n      $('.cBtnDelete').click(function () {\r\n          var id = $(this).data('id');\r\n          bootbox.confirm('Are you sure?', function (result) {\r\n          if (result) {\r\n            $.get('/resource/' + id + '/delete', function (response) {\r\n                if (response) {\r\n                    $('#iDivSuccess').show('fast');\r\n                    setTimeout(function () {\r\n                        $('#iDivSuccess').hide('slow');\r\n                    }, 2000);\r\n                    getResources();\r\n                    $('#iFormCategory')[0].reset();\r\n                } else {\r\n                    $('#iDivError').show('fast');\r\n                    setTimeout(function () {\r\n                        $('#iDivError').hide('slow');\r\n                    }, 2000);\r\n                }\r\n            }).fail(function () {\r\n                $('#iDivError').show('fast');\r\n                setTimeout(function () {\r\n                    $('#iDivError').hide('slow');\r\n                }, 2000);\r\n            });\r\n          }});\r\n      });\r\n\r\n    });\r\n  };\r\n\r\n  var bindStoreSubmit = function () {\r\n    $('#iFormResource').submit(function (event) {\r\n      // TODO add $.blockui\r\n      event.preventDefault();\r\n      if ($('#iFormResource').valid()) {\r\n        var resource = {\r\n            name: $('#iInputName').val(),\r\n            category_id: $('#iInputCategoryId').val(),\r\n            location: $('#iInputLocation').val(),\r\n            description: $('#iInputDescription').val()\r\n        };\r\n\r\n        $.post(\"/resource\", resource, function (response) {\r\n\r\n            if (response) {\r\n                $('#iDivSuccess').show('fast');\r\n                setTimeout(function () {\r\n                    $('#iDivSuccess').hide('slow');\r\n                }, 2000);\r\n                getResources();\r\n                $('#iFormResource')[0].reset();\r\n            } else {\r\n                $('#iDivError').show('fast');\r\n                setTimeout(function () {\r\n                    $('#iDivError').hide('slow');\r\n                }, 2000);\r\n            }\r\n        }).fail(function () {\r\n            $('#iDivError').show('fast');\r\n            setTimeout(function () {\r\n                $('#iDivError').hide('slow');\r\n            }, 2000);\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  var bindUpdateSubmit = function (id) {\r\n    $('#iFormResource').submit(function (event) {\r\n      // TODO add $.blockui\r\n      event.preventDefault();\r\n\r\n      if ($('#iFormResource').valid()) {\r\n          var resource = {\r\n              id: id,\r\n              name: $('#iInputName').val(),\r\n              category_id: $('#iInputCategoryId').val(),\r\n              location: $('#iInputLocation').val(),\r\n              description: $('#iInputDescription').val()\r\n          };\r\n          $.ajax({\r\n              url: '/resource/' + id, type: 'PUT', data: resource, success: function (response) {\r\n\r\n                  if (response) {\r\n                      $('#iDivSuccess').show('fast');\r\n                      setTimeout(function () {\r\n                          $('#iDivSuccess').hide('slow');\r\n                      }, 2000);\r\n                      getResources();\r\n                      $('#iFormCategory')[0].reset();\r\n                  } else {\r\n                      $('#iDivError').show('fast');\r\n                      setTimeout(function () {\r\n                          $('#iDivError').hide('slow');\r\n                      }, 2000);\r\n                  }\r\n\r\n              }\r\n          }).fail(function () {\r\n              $('#iDivError').show('fast');\r\n              setTimeout(function () {\r\n                  $('#iDivError').hide('slow');\r\n              }, 2000);\r\n          });\r\n\r\n      }\r\n      console.log(resource);\r\n\r\n\r\n    });\r\n  };\r\n\r\n  var dataTable = $('.data-table');\r\n\r\n  var initializeDataTable = function () {\r\n    dataTable.dataTable({\r\n      \"bJQueryUI\": true,\r\n      \"sPaginationType\": \"full_numbers\",\r\n      \"sDom\": '<\"\"l>t<\"F\"fp>'\r\n    });\r\n  };\r\n\r\n  var destroyDataTable = function () {\r\n    dataTable.dataTable().fnDestroy();\r\n  };\r\n\r\n  var bindCategorySelect = function () {\r\n    $('#iSelectCategory').change(function () {\r\n      var categoryId = $(this).find('option:selected').val();\r\n      $('#iInputCategoryId').val(categoryId);\r\n    });\r\n  };\r\n\r\n  getResources();\r\n  bindStoreSubmit();\r\n  bindCategorySelect();\r\n  initializeDataTable();\r\n});"]}