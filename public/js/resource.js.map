{"version":3,"sources":["csrf.js","resource.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"resource.js","sourcesContent":["$(document).ready(function () {\n  $.ajaxSetup({\n    headers: {\n      'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n    }\n  });\n});","$(document).ready(function () {\n  var getResources = function () {\n    $.get('/resource', function (response) {\n\n      if (response) {\n        destroyDataTable();\n        $('#iTbodyResources').html(response);\n        initializeDataTable();\n      }\n\n      $('.cTrResource').click(function () {\n        var id = $(this).data('id');\n\n        $.get('/resource/' + id + '/edit', function (response) {\n          $('#iDivResourceForm').html(response);\n          bindUpdateSubmit(id);\n          bindCategorySelect();\n        });\n      });\n    });\n  };\n\n  var bindStoreSubmit = function () {\n    $('#iFormResource').submit(function (event) {\n      // TODO add $.blockui\n      event.preventDefault();\n      var resource = {\n        name: $('#iInputName').val(),\n        category_id: $('#iInputCategoryId').val(),\n        location: $('#iInputLocation').val(),\n        description: $('#iInputDescription').val()\n      };\n\n      $.post(\"/resource\", resource, function (response) {\n        getResources();\n      });\n    });\n  };\n\n  var bindUpdateSubmit = function (id) {\n    $('#iFormResource').submit(function (event) {\n      // TODO add $.blockui\n      event.preventDefault();\n      var resource = {\n        _method: 'PUT', id: id, name: $('#iInputName').val(), category_id: $('#iInputCategoryId').val(),\n        location: $('#iInputLocation').val(),\n        description: $('#iInputDescription').val()\n      };\n\n      console.log(resource);\n\n      $.ajax({\n        url: '/resource/' + id, type: 'PUT', data: resource, success: function (response) {\n          getResources();\n        }\n      });\n    });\n  };\n\n  var dataTable = $('.data-table');\n\n  var initializeDataTable = function () {\n    dataTable.dataTable({\n      \"bJQueryUI\": true,\n      \"sPaginationType\": \"full_numbers\",\n      \"sDom\": '<\"\"l>t<\"F\"fp>'\n    });\n  };\n\n  var destroyDataTable = function () {\n    dataTable.dataTable().fnDestroy();\n  };\n\n  var bindCategorySelect = function () {\n    $('#iSelectCategory').change(function () {\n      var categoryId = $(this).find('option:selected').val();\n      $('#iInputCategoryId').val(categoryId);\n    });\n  };\n\n  getResources();\n  bindStoreSubmit();\n  bindCategorySelect();\n  initializeDataTable();\n});"]}